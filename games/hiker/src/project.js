window.__require=function e(t,i,c){function o(s,a){if(!i[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var h="function"==typeof __require&&__require;if(!a&&h)return h(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){return o(t[s][1][e]||e)},u,u.exports,e,t,i,c)}return i[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<c.length;s++)o(c[s]);return o}({blocks:[function(e,t,i){"use strict";cc._RF.push(t,"0ea03Afqs9Lz4MUcGEl//h+","blocks"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this.node.parent.parent.getChildByName("Map").getComponent(cc.TiledMap);this.mapSize=e.getMapSize(),this.tileSize=e.getTileSize();var t=e.getLayer("\u7816\u5757");this.ox=23,this.oy=0;var i=!1,c=0,o=0,n=0;this.cnt=0;for(var s=this.mapSize.height-1;s>=0;s--)for(var a=0;a<this.mapSize.width;a++)t.getTileGIDAt(a,s)?(i||(i=!0,c=a*this.tileSize.width),n++):i&&(o=a*this.tileSize.width,this.addPhysicsBoxCollider((c+o)/2-this.ox,(this.mapSize.height-s)*this.tileSize.height-this.tileSize.height/2-this.oy,n*this.tileSize.width,this.tileSize.height),n=0,this.cnt++,i=!1);cc.log("Blocks: "+this.node.getComponents(cc.PhysicsBoxCollider).length)},addPhysicsBoxCollider:function(e,t,i,c){this.node.addComponent(cc.PhysicsBoxCollider);var o=this.node.getComponents(cc.PhysicsBoxCollider)[this.cnt];o.size.width=i,o.size.height=c;var n=cc.Vec2.ZERO;n.x=e,n.y=t,o.offset=n},start:function(){}}),cc._RF.pop()},{}],camera:[function(e,t,i){"use strict";cc._RF.push(t,"3beccxjGCxHZa7U5gfJbO+O","camera"),cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node}},onLoad:function(){this.camera=this.getComponent(cc.Camera)},onEnable:function(){},onDisable:function(){},lateUpdate:function(e){this.target.convertToWorldSpaceAR(cc.Vec2.ZERO);var t=this.target.y;t>0&&t<this.node.parent.getChildByName("Map").height-this.node.parent.height-17&&(this.node.y=t)}}),cc._RF.pop()},{}],"game-clear":[function(e,t,i){"use strict";cc._RF.push(t,"3c2de962uhAALeVk+AYVIkX","game-clear"),cc.Class({extends:cc.Component,properties:{},backToMenu:function(){cc.director.loadScene("StartMenu")},start:function(){}}),cc._RF.pop()},{}],game:[function(e,t,i){"use strict";cc._RF.push(t,"f4272F8svhLs704gPGnJXTi","game"),cc.Class({extends:cc.Component,properties:{mask:{default:null,type:cc.Node},gameMenu:{default:null,type:cc.Node},backgroundAudio:{default:null,url:cc.AudioClip}},onLoad:function(){console.log("game.js"),cc.director.getPhysicsManager().enabled=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.audioBackground=cc.audioEngine.play(this.backgroundAudio,!0,1),cc.log(cc.audioEngine.getVolume(this.audioBackground)),this.isMenu=!1,this.mask.active=!1,this.gameMenu.active=!1},onDestroy:function(){cc.audioEngine.stop(this.audioBackground)},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.escape:this.isMenu?this.closeMenu():this.openMenu()}},onBackToMenu:function(){cc.director.loadScene("StartMenu")},openMenu:function(){this.isMenu=!0,this.mask.active=!0,this.gameMenu.active=!0},closeMenu:function(){this.isMenu=!1,this.mask.active=!1,this.gameMenu.active=!1},start:function(){}}),cc._RF.pop()},{}],"moving-ball":[function(e,t,i){"use strict";cc._RF.push(t,"7dc5fVan3VLI7BhjBRCuxR9","moving-ball"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=cc.moveBy(2,cc.v2(200,0)).easing(cc.easeInOut(3)),t=cc.moveBy(2,cc.v2(-200,0)).easing(cc.easeCubicActionInOut()),i=cc.repeatForever(cc.sequence(e,t));this.node.runAction(i)},onBeginContact:function(e,t,i){if("Player"==i.node.name){var c=i.node.getComponent("player");c.hurt=!0,t.node.x>i.node.x?c.flag=!0:c.flag=!1}e.disabled=!0},start:function(){}}),cc._RF.pop()},{}],"one-side-platform":[function(e,t,i){"use strict";cc._RF.push(t,"fa2b60NAydO5p4AEU4T3GjD","one-side-platform"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.pointVelPlatform=cc.v2(),this.pointVelOther=cc.v2(),this.relativeVel=cc.v2(),this.relativePoint=cc.v2()},onBeginContact:function(e,t,i){for(var c=i.body,o=t.body,n=e.getWorldManifold().points,s=this.pointVelPlatform,a=this.pointVelOther,r=this.relativeVel,h=(this.relativePoint,!1),u=0;u<n.length-1;u++)if(n[u].y!=n[u+1].y){h=!0;break}for(var d=0;d<n.length;d++)if(o.getLinearVelocityFromWorldPoint(n[d],s),c.getLinearVelocityFromWorldPoint(n[d],a),o.getLocalVector(a.subSelf(s),r),r.y<0&&!h)return;e.disabled=!0}}),cc._RF.pop()},{}],over:[function(e,t,i){"use strict";cc._RF.push(t,"a1337HN+/tGxbKXiPrfiUws","over"),cc.Class({extends:cc.Component,properties:{},tryAgain:function(){cc.director.loadScene("Game2")},backToMenu:function(){cc.director.loadScene("StartMenu")},start:function(){}}),cc._RF.pop()},{}],player:[function(e,t,i){"use strict";cc._RF.push(t,"ab0ae/bgbBKJZlwS8nwzcZo","player"),cc.Class({extends:cc.Component,properties:{maxSpeed:110,jumps:1,acceleration:1500,jumpSpeed:520,drag:600,jumpAudio:{default:null,url:cc.AudioClip}},onLoad:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.body=this.getComponent(cc.RigidBody),this._up=!1,this._alt=!1,this._left=!1,this._right=!1,this._jumps=this.jumps,this._altPressed=!1,this.game=this.node.parent.getComponent("game"),this.flag=!1,this.outOfCtrl=!1,this.prey=0,this.gravity=this.body.gravityScale},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:this._left=!0;break;case cc.macro.KEY.d:case cc.macro.KEY.right:this._right=!0;break;case cc.macro.KEY.alt:this._altPressed||0!=this.body.linearVelocity.y||(this._alt=!0),this._altPressed=!0;break;case cc.macro.KEY.w:case cc.macro.KEY.up:this._up=!0;break;case cc.macro.KEY.down:this._down=!0;break;case cc.macro.KEY.z:this._pause=!0}},onKeyUp:function(e){switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:this._left=!1;break;case cc.macro.KEY.d:case cc.macro.KEY.right:this._right=!1;break;case cc.macro.KEY.alt:this._altPressed=!1,this._alt=!1;break;case cc.macro.KEY.w:case cc.macro.KEY.up:this._up=!1;break;case cc.macro.KEY.down:this._down=!1;break;case cc.macro.KEY.z:this._pause=!1}},update:function(e){var t=this.body.linearVelocity;if(this.node.convertToWorldSpace(cc.Vec2.ZERO).y<0&&(cc.director.loadScene("GameOver"),this.enabled=!1),this.hurt&&!this.outOfCtrl&&(this.flag?t.x=-200:t.x=200,t.y=300,this.outOfCtrl=!0,this.hurt=!1,this.enterRope=!1),this.enterRope?(this.onRope||!this._up&&!this._down||this.outOfCtrl||(this._down&&(this.node.y-=this.node.height*this.node.scale),this.onRope=!0,this.body.gravityScale=0,this.node.x=this.ropeCenter,t.y=0),this.onRope?(t.x=0,this._up?t.y=70:this._down?t.y=-70:t.y=0,this._left&&this._altPressed?(this.body.gravityScale=this.gravity,t.x=-110,t.y=520,this.onRope=!1):this._right&&this._altPressed&&(this.body.gravityScale=this.gravity,t.x=110,t.y=520,this.onRope=!1)):this.body.gravityScale=this.gravity):(this.body.gravityScale=this.gravity,this.onRope=!1),!this.outOfCtrl){if(this._left&&!this.onRope)t.x>-this.maxSpeed&&(t.x-=this.acceleration*e,t.x<=-this.maxSpeed&&(t.x=-this.maxSpeed));else if(this._right&&!this.onRope)t.x<this.maxSpeed&&(t.x+=this.acceleration*e,t.x>=this.maxSpeed&&(t.x=this.maxSpeed));else if(0!=t.x){var i=this.drag*e;Math.abs(t.x)<=i?t.x=0:t.x-=t.x>0?i:-i}this.jumps>0&&this._alt&&!this.onRope&&(cc.audioEngine.play(this.jumpAudio,!1,1),this.jumps--,t.y=this.jumpSpeed,this._alt=!1)}0==this.prey&&0==t.y&&(this.jumps=1,this.outOfCtrl=!1);var c=-this.node.parent.width/2+this.node.width*this.node.scale/2,o=this.node.parent.width/2-this.node.width*this.node.scale/2;this.node.x<c?(t.x=0,this.node.x=c):this.node.x>o&&(t.x=0,this.node.x=o),this.body.linearVelocity=t,this.prey=t.y}}),cc._RF.pop()},{}],rope:[function(e,t,i){"use strict";cc._RF.push(t,"3e877B7upFNoKacg9O77tWv","rope"),cc.Class({extends:cc.Component,properties:{},onBeginContact:function(e,t,i){if("Player"==i.node.name){var c=i.node.getComponent("player");c.enterRope=!0,c.ropeCenter=t.offset.x}e.disabled=!0},onEndContact:function(e,t,i){"Player"==i.node.name&&(i.node.getComponent("player").enterRope=!1)},start:function(){}}),cc._RF.pop()},{}],scene:[function(e,t,i){"use strict";cc._RF.push(t,"5c8bdSCK2ZLV4t7UzxQ6IR8","scene"),cc.Class({extends:cc.Component,properties:{backgroundAudio:{default:null,url:cc.AudioClip},mouseEnterAudio:{default:null,url:cc.AudioClip},mouseUpAudio:{default:null,url:cc.AudioClip},mask:{default:null,type:cc.Node},gameMenu:{default:null,type:cc.Node}},onLoad:function(){console.log("scene.js"),this.gameMenu&&(cc.director.getPhysicsManager().enabled=!0,this.isGameMenu=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)),"StartMenu"==cc.director.getScene().name&&(cc.log("sence 03 preload"),cc.director.preloadScene("03"),cc.log("sence GameOver preload"),cc.director.preloadScene("GameOver")),this.children=this.node.children;for(var e=0;e<this.children.length;e++){this.grandchild=this.children[e].children;for(var t=0;t<this.grandchild.length;t++)this.grandchild[t].getComponent(cc.Button)&&(this.grandchild[t].on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.grandchild[t].on(cc.Node.EventType.MOUSE_UP,this.onMouseUp,this))}this.backgroundAudio&&(this.audioBackground=cc.audioEngine.play(this.backgroundAudio,!0,1))},onDestroy:function(){cc.audioEngine.stop(this.audioBackground)},onMouseEnter:function(){cc.audioEngine.play(this.mouseEnterAudio,!1,1)},onMouseUp:function(){cc.audioEngine.play(this.mouseUpAudio)},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.escape:this.isGameMenu?this.closeMenu():this.openMenu()}},openMenu:function(){cc.director.pause(),this.isGameMenu=!0,this.mask.active=!0,this.gameMenu.active=!0},closeMenu:function(){cc.director.resume(),this.isGameMenu=!1,this.mask.active=!1,this.gameMenu.active=!1},startGame:function(){cc.director.loadScene("03")},tryAgain:function(){cc.director.loadScene("03")},backToMenu:function(){cc.director.loadScene("StartMenu")},start:function(){}}),cc._RF.pop()},{}],start:[function(e,t,i){"use strict";cc._RF.push(t,"a9bdckeOpBKx4ydv7rW2j7L","start"),cc.Class({extends:cc.Component,properties:{backgroundAudio:{default:null,url:cc.AudioClip},mouseEnterAudio:{default:null,url:cc.AudioClip},mouseUpAudio:{default:null,url:cc.AudioClip}},onLoad:function(){console.log("start.js"),this.children=this.node.children;for(var e=0;e<this.children.length;e++)this.children[e].getComponent(cc.Button)&&(this.children[e].on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.children[e].on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this),this.children[e].on(cc.Node.EventType.MOUSE_UP,this.onMouseUp,this));cc.log(),this.audioBackground=cc.audioEngine.play(this.backgroundAudio,!0,1),this._pressed=!1},onDestroy:function(){cc.audioEngine.stop(this.audioBackground)},onMouseEnter:function(){cc.audioEngine.play(this.mouseEnterAudio,!1,1)},onMouseDown:function(){this._pressed=!0},onMouseUp:function(){cc.audioEngine.play(this.mouseUpAudio)},onStartGame:function(){cc.director.loadScene("Game2")},start:function(){}}),cc._RF.pop()},{}],thorn:[function(e,t,i){"use strict";cc._RF.push(t,"2b764z24hFETK0G9b1qsqDu","thorn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.nodePlayer=this.node.parent.parent.getChildByName("Player")},onBeginContact:function(e,t,i){var c=this.nodePlayer.getComponent("player");c.hurt=!0,t.offset.x>i.node.position.x?c.flag=!0:c.flag=!1,e.disabled=!0},start:function(){}}),cc._RF.pop()},{}],"three-side-platform":[function(e,t,i){"use strict";cc._RF.push(t,"c7337t4hV5MFrD3Sy/CN1Un","three-side-platform"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.pointVelPlatform=cc.v2(),this.pointVelOther=cc.v2(),this.relativeVel=cc.v2(),this.relativePoint=cc.v2()},onBeginContact:function(e,t,i){this._pointsCache;for(var c=i.body,o=t.body,n=e.getWorldManifold().points,s=this.pointVelPlatform,a=this.pointVelOther,r=this.relativeVel,h=(this.relativePoint,!1),u=0;u<n.length-1;u++)if(n[u].y!=n[u+1].y){h=!0;break}for(var d=0;d<n.length;d++){if(o.getLinearVelocityFromWorldPoint(n[d],s),c.getLinearVelocityFromWorldPoint(n[d],a),o.getLocalVector(a.subSelf(s),r),r.y<0&&!h)return;if(0!=i.body.linearVelocity.x&&h)return}e.disabled=!0},start:function(){}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t,i){"use strict";cc._RF.push(t,"fc4ecVCjuhF7YakS+fCm+yu","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}],win:[function(e,t,i){"use strict";cc._RF.push(t,"78c5eghWB5LvaDRj17Cqg8+","win"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){console.log("win.js")},onBeginContact:function(e,t,i){"Player"==i.node.name&&cc.find("Canvas/Camera/Win").getComponent(cc.Animation).play();e.disabled=!0},start:function(){}}),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","blocks","camera","game-clear","game","moving-ball","one-side-platform","over","player","rope","scene","start","thorn","three-side-platform","win"]);