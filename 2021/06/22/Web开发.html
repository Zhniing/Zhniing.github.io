<!DOCTYPE html>
<html>
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Web开发</title>
    <script type="text/javascript" src="/assets/js/prism.js"></script>
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="/assets/css/prism.css">
    <script type="text/javascript" src="/assets/js/jquery-3.6.0.js"></script>
    <script src="/assets/js/scrollnav.min.umd.js"></script>
  </head>
  <body>
    <div class="wrapper">
      <div class="clearfloat">
        <nav class="navbar">
    <!-- <a href="/" >
        Home
    </a>
    <a href="/about.html" >
        About
    </a> -->
    
        <!-- <a href="https://github.com/Zhniing"  target="_self"> -->
        <a href="https://github.com/Zhniing" target="_blank">
            Github
        </a>
    
        <!-- <a href="/about.html"  target="_self"> -->
        <a href="/about.html" target="_self">
            About
        </a>
    
        <!-- <a href="/games/hiker"  target="_self"> -->
        <a href="/games/hiker" target="_self">
            Game
        </a>
    
        <!-- <a href="/"  target="_self"> -->
        <a href="/" target="_self">
            Home
        </a>
    
</nav>
      </div>
      <base target="_blank"> <!-- 仅post页面的a标签为_blank -->

<h1>Web开发</h1>
<!-- <p>Posted on 22 Jun 2021, Last updated: </p> -->
<!-- <p>发表于 2021 年 06 月 22 日 | 更新于 </p> -->
<p>发布于 2021 年 06 月 22 日  | 更新于 2021 年 09 月 01 日 </p>

<div class="post_content">
    <h1 id="django">Django</h1>

<h2 id="环境配置">环境配置</h2>

<p><code class="language-plaintext highlighter-rouge">pip install pylint-django</code></p>

<h2 id="field-options">Field options</h2>

<h3 id="null--blank">null &amp; blank</h3>

<ol>
  <li>null是数据库相关的，<strong>只</strong>影响字段属性: Null，表单提交的时候依旧不能为空，只能sql语句设置为NULL</li>
  <li>blank是验证相关的，允许表单提交为空(除非特殊情况，尽量用blank)</li>
</ol>

<blockquote>
  <p>For both string-based and non-string-based fields, you will also need to set <strong>blank=True</strong> if you wish to permit empty values in <strong>forms</strong>, as the null parameter only affects database storage. <a href="https://docs.djangoproject.com/en/3.2/ref/models/fields/">ref</a></p>
</blockquote>

<h3 id="字段类型field-types">字段类型(Field types)</h3>

<p><a href="https://docs.djangoproject.com/en/3.2/ref/models/fields/#field-types">doc</a></p>

<h3 id="关系映射">关系映射</h3>

<p>一对多：</p>

<ol>
  <li>在“多”的model里写外键</li>
  <li>
<strong>反向</strong>查询：
    <ol>
      <li>“一”的model里通过<code class="language-plaintext highlighter-rouge">related_name</code><strong>属性</strong>来访问其关联项，<code class="language-plaintext highlighter-rouge">related_name</code>可在定义外键时指定，默认为<code class="language-plaintext highlighter-rouge">[“一“的model名]_set</code>
<del>“一”的model里会自动添加一个隐藏属性：<code class="language-plaintext highlighter-rouge">[“一“的model名]_set</code>，可用<code class="language-plaintext highlighter-rouge">related_name</code>参数指定该属性名。即<code class="language-plaintext highlighter-rouge">related_name</code>默认为<code class="language-plaintext highlighter-rouge">[“一“的model名]_set</code></del>
</li>
      <li>这个<code class="language-plaintext highlighter-rouge">related_name</code>属性是“一”的model的<strong>objects</strong>：可通过<code class="language-plaintext highlighter-rouge">.all()</code>来查询所有数据</li>
    </ol>
  </li>
</ol>

<h3 id="关系映射的序列化规则">关系映射的序列化规则</h3>

<p>通过<strong>嵌套</strong>序列化，可以同时查询并返回多个关联项的数据</p>

<p><a href="https://www.django-rest-framework.org/api-guide/relations/#writable-nested-serializers">ref</a></p>

<h3 id="重写model的delete函数">重写model的delete()函数</h3>

<p>下列情况会发生调用：</p>

<ol>
  <li>一个实例调用delete()方法时</li>
  <li>在admin中删除单个数据项时</li>
</ol>

<ul>
  <li>
    <p>注意：</p>

    <p>QuerySet调用delete()时，虽然是删除QuerySet里的所有数据行，但并不会调用model的delete()方法，而是直接通过SQL语句执行批量删除</p>
  </li>
</ul>

<h3 id="自定义动作函数">自定义动作函数</h3>

<p>用于在admin页面批量操作多条数据</p>

<p><a href="https://docs.djangoproject.com/zh-hans/3.2/ref/contrib/admin/actions/">doc</a></p>

<h2 id="django-shell">Django Shell</h2>

<p>可以在不运行完整项目的情况下，选择性地运行部分代码，一般用来<strong>测试</strong>一些函数或模型</p>

<h2 id="敏感信息">敏感信息</h2>

<p><code class="language-plaintext highlighter-rouge">settings.py</code>默认<em>硬编码(hardcode)</em>了一些敏感信息：<code class="language-plaintext highlighter-rouge">SECRET_KEY</code>和数据库密码</p>

<p>为防止把项目部署到网上、上传github时泄露敏感信息，可以将hardcode改为从本地读取：环境变量或文件</p>

<p><a href="https://docs.djangoproject.com/en/3.2/howto/deployment/checklist/#secret-key">SECRET_KEY</a></p>

<p><a href="https://www.cnblogs.com/cpl9412290130/p/10431514.html">Django项目SECRET_KEY等敏感信息保存</a></p>

<h1 id="mysql">MySQL</h1>

<h3 id="初次进入">初次进入</h3>

<p><code class="language-plaintext highlighter-rouge">sudo mysql</code></p>

<p><a href="https://stackoverflow.com/questions/39281594/error-1698-28000-access-denied-for-user-rootlocalhost">ref</a></p>

<h3 id="初始用户">初始用户</h3>

<p><code class="language-plaintext highlighter-rouge">/etc/mysql/debian.cnf</code>文件中有默认的用户名和密码 <a href="https://blog.csdn.net/theonegis/article/details/51810063">ref</a></p>

<h3 id="基本操作">基本操作</h3>

<p><code class="language-plaintext highlighter-rouge">create database [DATABASE NAME] default charset utf8;</code>创建数据库(utf8支持中文)</p>

<p><code class="language-plaintext highlighter-rouge">show tables;</code></p>

<ol>
  <li>查看当前数据库有哪些表</li>
  <li>其中Tables_in_XXX的XXX就是当前数据库的名字</li>
</ol>

<p><code class="language-plaintext highlighter-rouge">desc [table];</code>查看表的字段信息(desc -&gt; describe)</p>

<p><code class="language-plaintext highlighter-rouge">select * from [table]\G;</code>格式化打印表中的所有数据行</p>

<p><code class="language-plaintext highlighter-rouge">show create table [table];</code>显示表的创建命令</p>

<p><code class="language-plaintext highlighter-rouge">drop database [database];</code>删除数据库</p>

<h3 id="备份恢复">备份&amp;恢复</h3>

<ol>
  <li>备份为sql语句
<code class="language-plaintext highlighter-rouge">mysqldump -u[user] -p [database] [table1 table2 ...] &gt; backup.sql</code>
</li>
  <li>从sql语句恢复
<code class="language-plaintext highlighter-rouge">mysql -u[user] -p [database] &lt; backup.sql</code>
</li>
</ol>

<h1 id="http">HTTP</h1>

<h3 id="监听端口">监听端口</h3>

<p><code class="language-plaintext highlighter-rouge">0.0.0.0</code>代表本机上的任意IP，监听<code class="language-plaintext highlighter-rouge">0.0.0.0(:8080)</code>代表监听机器上的<strong>所有ip</strong>(的<code class="language-plaintext highlighter-rouge">8080</code>端口)</p>

<p><code class="language-plaintext highlighter-rouge">localhost</code>与<code class="language-plaintext highlighter-rouge">127.0.0.1</code>等价（别名），只有本机能访问，其他机器想要访问必须通过<strong>转发</strong></p>

<h3 id="get">Get</h3>

<p>常见的触发Get请求的方法</p>

<ol>
  <li>直接输入URL（注意：仅包含域名的URL是POST请求）</li>
  <li>点击超链接</li>
</ol>

<h1 id="nodejs--npm">node.js &amp; npm</h1>

<h3 id="安装">安装</h3>

<ol>
  <li>直接从官网下载并安装<a href="https://www.runoob.com/nodejs/nodejs-install-setup.html">编译好的包</a>
</li>
  <li>
    <p>添加软链</p>

    <p><code class="language-plaintext highlighter-rouge">ln -s [上一步解压的包]/bin/npm /usr/local/bin/</code></p>

    <p><code class="language-plaintext highlighter-rouge">ln -s [上一步解压的包]/bin/node /usr/local/bin/</code></p>
  </li>
</ol>

</div>
    </div>
    <script>
      const ct = document.querySelector('.post_content');  //".post-content"指向文章内容所在的div，需根据实际情况修改
      scrollnav.init(ct, {
          debug: false,
          easingStyle: 'linear',
          //section为一级目录，subsection为二级目录
          sections: ($('.post_content > h1').length>0) ? 'h1' : 'h2',
          subSections: ($('.post_content > h1').length>0) ? 'h2' : 'h3',
      });
    </script>
    <script type="text/javascript">
      $('pre').addClass("line-numbers").css("white-space", "pre-wrap");
    </script>
  </body>
</html>
